<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/split-type"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.12.5/dist/gsap.min.js"></script>
    <title>Samuel Prieur</title>

    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <nav class="sidebar">
      <div class="social-links">
        <a id="f" class="hiddenN" href="https://www.linkedin.com/in/samuel-prieur/" target="_blank">in</a>
        <a id="e" class="hiddenN" href="https://github.com/SamuelPrieur" target="_blank">git</a>
      </div>
      <hr class="vertical-line" />
      <ul>
        <li><a id="d" class="hiddenN" href="Work.html">Work.</a></li>
        <li><a id="c" class="hiddenN" href="About.html">About.</a></li>
        <li><a id="b" class="hiddenN" href="Contact.html">Contact.</a></li>
      </ul>
      <a id="a" href="Index.html" class="name hiddenN">Sam.</a>
    </nav>
    <div class="container">
      <main id="swup" class="content transition-fade">
        <h1 id="textHeading" class="AboutHeading">
          My name is Samuel Prieur. I'm a
          <strong>web developer</strong> student based in France. Currently in Canada for my senior year.
        </h1>
        <div class="text-and-image">
          <h2 id="daysCounter"></h2>
          <ul>
            <li id="DevDate"></li>
            <li id="WebDevDate"></li>
          </ul>

          <div class="holder">
            <img class="portrait" id="portrait" src="img/portrait.webp" alt="" />
          </div>
        </div>
      </main>
      <p class="DateHour">GMT+2 (<strong id="Hour"></strong>, PARIS)</p>
    </div>

    <script src="https://unpkg.com/swup@4"></script>
    <script>
      function init() {
        const textHeading = new SplitType("#textHeading");
        gsap.to(".word", {
          y: 0,
          stagger: 0.05,
          delay: 0,
          duration: 0.5,
        });
      }

      const swup = new Swup();

      if (document.readyState === "complete") {
        init();
      } else {
        document.addEventListener("DOMContentLoaded", init);
      }

      swup.hooks.on("page:view", init);

      function afficherHour() {
        let now = new Date();
        let options = {
          timeZone: "Europe/Paris",
          hour: "2-digit",
          minute: "2-digit",
          hour12: true,
        };
        let hourParis = now.toLocaleTimeString("en-US", options);
        document.getElementById("Hour").textContent = hourParis;
      }
      window.onload = function () {
        afficherHour();
        setInterval(afficherHour, 1000);
      };

      function calculateDays(startDate) {
        const currentDate = new Date();
        const timeDifference = currentDate - startDate;
        const daysDifference = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
        return daysDifference;
      }

      const DevDate = new Date("2019-09-01");
      const WebDevDate = new Date("2021-09-01");

      // Fonction d'animation du nombre
      function animateNumber(element, finalValue, duration) {
        gsap.fromTo(
          element,
          { innerHTML: 0 },
          {
            innerHTML: finalValue,
            duration: duration,
            ease: "power1.out",
            onUpdate: function () {
              element.textContent =
                Math.floor(this.targets()[0].innerHTML) + (element.id === "DevDate" ? " days as a programmer." : " days as a web developer.");
            },
          }
        );
      }

      // Récupération des éléments HTML
      const devDateElement = document.getElementById("DevDate");
      const webDevDateElement = document.getElementById("WebDevDate");

      // Appel de la fonction d'animation avec les valeurs calculées
      animateNumber(devDateElement, calculateDays(DevDate), 5); // 2 secondes pour l'animation
      animateNumber(webDevDateElement, calculateDays(WebDevDate), 5);

      const observer = new IntersectionObserver((entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            entry.target.classList.add("showN");
          }
        });
      });
      const ShowAnim = document.querySelectorAll(".hiddenN");
      ShowAnim.forEach((el) => observer.observe(el));
    </script>
  </body>
</html>
